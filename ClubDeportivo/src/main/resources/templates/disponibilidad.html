<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/general.css}">
</head>

<body>
    <header th:replace="~{fragments/encabezado :: encabezado}"></header>
    <main>
        <h1 class="text-center">HAZ TU RESERVA</h1>
        <div class="container" th:fragment="calendario">
            <div class="table-responsive">
                <table class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th colspan="7">
                                <span th:text="${#temporals.format(dia, 'dd/MM/yyyy')}"></span>
                            </th>
                        </tr>
                        <tr class="bg-light-gray">
                            <td>Horas</td>
                            <th class="text-uppercase" th:each="pista : ${pistas}" th:text="${'Pista ' + pista}"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="hora : ${horas}">
                            <td class="hora" th:text="${hora}"></td>
                            <td class="bloquePista" style="background-color: green;" th:each="pista : ${pistas}">
                                <div class="reserva" th:each="reserva : ${reservas}"
                                    th:if="${reserva.hora_reserva == hora and reserva.fecha_reserva == dia and reserva.pista.numero == pista}">
                                    <p> Socio: <span
                                            th:text="${reserva.socio.nombre}"></span></a></p>
                                    <div class="modal fade" th:id="'reservaModal-' + ${reserva.id}" tabindex="-1"
                                        role="dialog" aria-labelledby="reservaModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header bg-primary text-white align-content-start">
                                                    <h5 class="modal-title" id="reservaModalLabel">Detalles
                                                        de la Reserva</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p><strong>Socio:</strong> <span
                                                            th:text="${reserva.socio.nombre + ' ' + reserva.socio.apellidos}"></span>
                                                    </p>
                                                    <p><strong>Fecha de la Reserva:</strong> <span
                                                            th:text="${#temporals.format(reserva.fecha_reserva, 'dd/MM/yyyy')}"></span>
                                                    </p>
                                                    <p><strong>Hora de la Reserva:</strong> <span
                                                            th:text="${reserva.hora_reserva}"></span></p>
                                                    <p><strong>Pista:</strong> <span
                                                            th:text="${reserva.pista.numero}"></span></p>
                                                    <p><strong>Deporte:</strong> <span
                                                            th:text="${reserva.pista.deporte.nombre}"></span>
                                                    </p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Cerrar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</body>

</html>